<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('Home')">
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/main.css}"/>
</head>
<body>
<nav th:replace="fragments/layout :: navbar(~{ :: #navbarRight}, ~{ :: #navbarLeft})">
    <ul class="navbar-nav mr-auto" id="navbarRight">
        <li class="nav-item">
            <a class="nav-link active" th:href="@{__${path}__/home}">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" th:href="@{__${path}__/store}">Store</a>
        </li>
    </ul>
    <ul class="navbar-nav ml-auto" id="navbarLeft">
        <li class="nav-item">
            <a class="nav-link" th:href="@{__${path}__/logout}">Logout</a>
        </li>
    </ul>
</nav>
<div class="container">
    <div class="row">
        <div class="col">
            <div class="card m-3">
                <div class="d-flex justify-content-center align-items-center">
                    <div>
                        <h5 class="m-2">User Data</h5>

                    </div>

                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">Username:</span>
                            </div>
                            <div class="col-sm" th:text="${user.username}">
                                JohnSmith12
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">Email:</span>
                            </div>
                            <div class="col-sm" th:text="${user.email}">
                                john.smith@gmail.com
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">First Name:</span>
                            </div>
                            <div class="col-sm" th:text="${user.firstName}">
                                John
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">Last Name:</span>
                            </div>
                            <div class="col-sm" th:text="${user.lastName}">
                                Smith
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">NIP:</span>
                            </div>
                            <div class="col-sm" th:text="${user.nip}">
                                123456789
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">Phone:</span>
                            </div>
                            <div class="col-sm" th:text="${user.phoneNumber}">
                                123456789
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row">
                            <div class="col-sm-2">
                                <span class="font-weight-bold">Address:</span>
                            </div>
                            <div class="col-sm">
                                <span th:text="${user.address.addressLine1}"></span><br/>
                                <span th:text="${user.address.addressLine2}"></span><br/>
                                <span th:text="${user.address.city}"></span>
                                <span th:text="${user.address.zipcode}"></span><br/>
                                <span th:text="${user.address.country.countryName}"></span>
                            </div>
                        </div>
                    </li>
                </ul>
                <div class="d-flex justify-content-between align-items-center">
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary m-2 mx-3" data-toggle="modal"
                            data-target="#exampleModal">
                        Edit
                    </button>
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <form method="POST">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">Edit user data</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="form-row">
                                            <div class="form-group col-md-6">
                                                <label for="inputEmail">Email</label>
                                                <input type="email" class="form-control" id="inputEmail" name="email"
                                                       th:value="${user.email}">
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="inputFirstName">First Name</label>
                                                <input type="text" class="form-control" id="inputFirstName"
                                                       name="firstName" th:value="${user.firstName}">
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="inputLastName">Last Name</label>
                                                <input type="text" class="form-control" id="inputLastName"
                                                       name="lastName" th:value="${user.lastName}">
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-6">
                                                <label for="inputFirstName">Nip</label>
                                                <input type="text" class="form-control" id="inputNip" name="number"
                                                       th:value="${user.nip}">
                                            </div>
                                            <div class="form-group col-md-6">
                                                <label for="inputLastName">Phone</label>
                                                <input type="tel" class="form-control" id="inputPhone" name="phone"
                                                       pattern="^((\+\d{1,3} ?)?(\d{3} ?){3})$"
                                                       th:value="${user.phoneNumber}">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputAddress">Address</label>
                                            <input type="text" class="form-control" id="inputAddress"
                                                   name="addressLine1" th:value="${user.address.addressLine1}">
                                        </div>
                                        <div class="form-group">
                                            <label for="inputAddress2">Address 2</label>
                                            <input type="text" class="form-control" id="inputAddress2"
                                                   name="addressLine2" th:value="${user.address.addressLine2}">
                                        </div>
                                        <div class="form-row">
                                            <div class="form-group col-md-9">
                                                <label for="inputCity">City</label>
                                                <input type="text" class="form-control" id="inputCity" name="city"
                                                       th:value="${user.address.city}">
                                            </div>
                                            <div class="form-group col-md-3">
                                                <label for="inputZip">Zip</label>
                                                <input type="text" class="form-control" id="inputZip" name="zipcode"
                                                       inputmode="numeric"
                                                       pattern="^\d{2}-\d{3}$"
                                                       th:value="${user.address.zipcode}">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close
                                        </button>
                                        <button type="submit" class="btn btn-primary">Save changes</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-danger m-2 mx-3" data-toggle="modal"
                            data-target="#exampleModalDelete">
                        Delete Account
                    </button>
                    <div class="modal fade" id="exampleModalDelete" tabindex="-1"
                         aria-labelledby="exampleModalLabelDelete" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <form method="POST" th:action="@{/user/delete}">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabelDelete">Do you want to delete your
                                            account</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body d-flex justify-content-center">
                                        <button type="button" class="btn btn-secondary mx-2" data-dismiss="modal">Close
                                        </button>
                                        <button type="submit" class="btn btn-danger mx-2">Delete</button>
                                    </div>
                                    <div class="modal-footer">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>


            </div>

        </div>
    </div>
    <div class="row">
        <div class="col">
            <ul class="list-group accordion mx-3" id="orderAccordion">
                <li class="list-group-item"><h4>Orders</h4></li>
                <li class="list-group-item" th:if="${user.orders.size() == 0}">
                    <p>You don't have any orders yet</p>
                </li>
                <li class="list-group-item" th:each="order, i: ${user.orders}">
                    <div class="row">
                        <div class="col-4">
                            <h5 th:text="'Order #'+${order?.id}">Order #1234</h5>
                            <small class="text-muted" data-toggle="collapse" data-target="#orderItems"
                                   aria-expanded="false" aria-controls="collapseExample" type="button"
                                   th:attr="data-target='#orderItems'+${i.index}">
                                Click to expand/collapse
                            </small>
                        </div>
                        <div class="col-4 d-flex justify-content-center ">
                            <small th:text="${#dates.format(order?.getDate(), 'HH:mm, dd/MM/yyyy')}">16:34,
                                01/01/2021</small>
                        </div>
                        <div class="d-flex align-items-center col-4 justify-content-end">
                            <p class="font-weight-bold m-0" th:text="${order.status}">
                                RECEVIED
                            </p>
                        </div>
                    </div>
                    <div class="collapse" th:id="'orderItems' + ${i.index}" data-parent="#orderAccordion">
                        <ul class="list-group mt-3">
                            <li class="list-group-item" th:each="item: ${order?.items}">
                                <div class="d-flex w-100 justify-content-between align-items-center">
                                    <div>

                                        <p class="font-weight-normal m-0">
                                            <a th:href="@{__${path}__/store/item/__${item?.item?.id}__}"
                                               class="text-reset"
                                               th:text="${item?.item?.name}">Rezystroy 10k</a>
                                        </p>

                                        <small class="text-muted" th:text="|ID: ${item?.item?.id}|">ID: 12345</small>
                                    </div>
                                    <div>
                                        <p class="m-0" th:text="|Count: ${item?.quantity}|">Ilość: 4</p>
                                    </div>
                                </div>
                                <div class="d-flex w-100 justify-content-between">

                                </div>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>

    </div>

</div>


</body>
</html>